# we need to add JNI specific stuff here
PKG_CPPFLAGS+=-I. @JAVA_CPPFLAGS@
PKG_LIBS+=@JAVA_LIBS@
JAVA_HOME=@JAVA_HOME@
# make SHLIB believe that we know better what the objects are - needed since threads.o is optional
OBJECTS=Rglue.o arrayc.o  callJNI.o callback.o fields.o init.o jri_glue.o loader.o rJava.o tools.o @THREADS_OBJ@

all: $(SHLIB) @WANT_JRI_TRUE@ jri

.PHONY: all

# this is a hack to force SHLIB to run our sub-make
# we don't really use has_jri
jri:
	$(MAKE) -C ../jri/
	-@mkdir -p ../inst/jri
	@(cp -r ../jri/src/JRI.jar ../jri/*jri.* ../jri/run ../jri/examples ../inst/jri/)

